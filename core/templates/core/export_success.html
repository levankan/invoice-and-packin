{% extends 'core/base.html' %}
{% block title %}Export Saved{% endblock %}
{% block content %}
<div class="card mx-auto shadow-lg" style="max-width: 700px; padding: 40px; border-radius: 20px;">
    <h2 class="mb-3 text-success">âœ… Export Registered</h2>
    <p class="text-muted">Your export has been saved successfully.</p>

    <ul class="list-group text-start mt-3 mb-4">
        <li class="list-group-item"><strong>Export Number:</strong> {{ export.export_number }}</li>
        <li class="list-group-item"><strong>Invoice Number:</strong> {{ export.invoice_number }}</li>
        <li class="list-group-item"><strong>Packing List Number:</strong> {{ export.packing_list_number }}</li>
        <li class="list-group-item"><strong>Seller:</strong> {{ export.seller }}</li>
        <li class="list-group-item"><strong>Sold To:</strong> {{ export.sold_to }}</li>
        <li class="list-group-item"><strong>Shipped To:</strong> {{ export.shipped_to }}</li>
        <li class="list-group-item"><strong>Project No:</strong> {{ export.project_no }}</li>
        <li class="list-group-item"><strong>Rows Saved:</strong> {{ rows }}</li>
    </ul>

    <!-- Main Action Buttons -->
    <div class="d-flex flex-wrap gap-2 justify-content-center mb-4">
        <a href="{% url 'exports_view' %}" class="btn btn-outline-primary">
            â¬… Back to Exports
        </a>
        <a href="{% url 'invoice' export.id %}" class="btn btn-outline-warning">
            ğŸ“„ View Invoice
        </a>
        <a href="{% url 'generate_doc' %}" class="btn btn-outline-success">
            â• New Export
        </a>
        <a href="{% url 'invoice_pdf' export.id %}" class="btn btn-danger">
            ğŸ“¥ Invoice PDF
        </a>
        <a href="{% url 'packing_list_pdf' export.id %}" class="btn btn-success">
            ğŸ“¥ Packing List PDF
        </a>
    </div>

    <!-- Per Pallet Downloads -->
    <h4 class="mt-4">ğŸ“¦ Download per Pallet</h4>
    <ul class="list-group">
        {% for pallet in export.pallets.all %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><strong>Pallet {{ pallet.pallet_number }}</strong></span>
            <div class="btn-group">
                <a href="{% url 'invoice_pdf_per_pallet' export.id pallet.id %}" class="btn btn-sm btn-outline-danger">
                    ğŸ“„ Invoice
                </a>
                <a href="{% url 'packing_list_pdf_per_pallet' export.id pallet.id %}" class="btn btn-sm btn-outline-success">
                    ğŸ“¦ Packing List
                </a>
                <a href="{% url 'pallet_label_pdf' export.id pallet.id %}" class="btn btn-sm btn-outline-dark">
                    ğŸ· Label
                </a>
            </div>
        </li>
        {% empty %}
        <li class="list-group-item text-muted">No pallets available.</li>
        {% endfor %}
    </ul>

</div>
{% endblock %}
